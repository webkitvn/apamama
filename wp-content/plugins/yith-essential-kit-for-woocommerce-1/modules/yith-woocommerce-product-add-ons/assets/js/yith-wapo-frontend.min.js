jQuery(document).ready(function(t){"use strict";function i(){"use strcit";t("body").find("form:not(.in_loop).cart").each(function(){t(this).init_yith_wapo_totals(),t(this).find(".variations select").change()}),t("body").find(".ywapo_option_description").each(function(){var i=t(this).data("tooltip");i&&a(t(this),i)}),t(".ywapo_input_container_color .wp-color-picker").wpColorPicker({change:function(i,a){var e=t(this).closest(".ywapo_input_container_color"),n=e.find("input.ywapo_input_color");n.val(a.color.toString()),n.change()},clear:function(){var i=t(this).closest(".ywapo_input_container_color"),a=i.find("input.ywapo_input_color");a.val(""),a.change()}}),t(".ywapo_datepicker").each(function(){t(this).datepicker()})}function a(i,a){"use strcit";var e=t('<span class="yith_wccl_tooltip"></span>'),n=yith_wapo_general.tooltip_pos+" "+yith_wapo_general.tooltip_ani;e.addClass(n),i.append(e.html("<span>"+a+"</span>"))}return"undefined"==typeof yith_wapo_general?!1:(t.fn.init_yith_wapo_totals=function(){function i(i){"use strcit";var a=t(".yith_wapo_groups_container");if("undefined"!=typeof a){var o=a.find("input.ywapo_input.ywapo_price_percentage, select.ywapo_input option.ywapo_price_percentage, textarea.ywapo_input.ywapo_price_percentage"),r=0;o.each(function(){var p=t(this);if("undefined"!=typeof p.data("pricetype")&&"fixed"!=p.data("pricetype")){var c=p.closest(".ywapo_input_container");t.ajax({url:yith_wapo_general.wc_ajax_url.toString().replace("%%endpoint%%","yith_wapo_update_variation_price"),type:"POST",data:{variation_id:i.variation_id,variation_price:i.display_price,type_id:p.data("typeid"),option_index:p.data("index")},beforeSend:function(){0==r&&e(a)},success:function(i){if(!i.error&&""!=i){p.attr("data-price",i);var e=_(parseFloat(i));if(c.find("span.amount").html(e),""!=p.text()){var s=p.text().split("+");if(s.length>0){s=s[0]+" + "+e,p.addClass("ywapo_option_price_chaged");var d=p.closest(".ywapo_group_container"),u=d.find("select"),l=u.attr("sb");if("undefined"!=typeof l){var h=p.data("index"),f=t(t("#sbOptions_"+l).find("li").get(parseInt(h)+1)).find("a");f.html(s)}}p.html(s)}r++,r==o.length&&n(a)}}})}})}}function a(i){var a=!0;return i.find(".ywapo_group_container").each(function(){var i=t(this);if("undefined"!=typeof i&&!i.hasClass("ywapo_conditional_hidden")){var e=i.data("type"),n="1"==i.data("requested"),o=!0;switch(e){case"text":case"textarea":case"number":case"file":case"date":case"range":i.find("input.ywapo_input, textarea.ywapo_input").each(function(){return""==t(this).val()&&"required"==t(this).attr("required")?(n=!0,void(o=!1)):""==t(this).val()?void(o=!1):void 0});break;case"color":i.find("input.ywapo_input_color").each(function(){return""==t(this).val()?void(o=!1):void 0});break;case"select":o=""!=i.find("select.ywapo_input").val();break;case"labels":o=i.find(".ywapo_input_container_labels.ywapo_selected").length>0;break;case"checkbox":if(n){var r=i.find(".ywapo_input").length,p=i.find(".ywapo_input:checked").length;o=r>0&&r==p}else i.find(".ywapo_input").each(function(){return t(this).is(":checked")||"required"!=t(this).attr("required")?void 0:(n=!0,void(o=!1))});break;case"radio":o=!1,i.find("input.ywapo_input").each(function(){return t(this).is(":checked")?void(o=!0):void 0})}if(n&&!o)return a=!1,void i.addClass("ywapo_miss_required");i.removeClass("ywapo_miss_required")}}),a||t("html, body").animate({scrollTop:t("#yith_wapo_groups_container").offset().top},2e3),a}function e(t){"use strcit";t.block({message:"",overlayCSS:{backgroundColor:"#fff",opacity:.6,cursor:"wait"}})}function n(t){"use strcit";t.unblock()}function o(i,a){var e=a.data("type"),n=!1;if("select"==e||"radio"==e)n=""!=i.val()?!0:!1;else switch(e){case"checkbox":a.find('input[type="checkbox"].ywapo_input').each(function(){return t(this).is(":checked")?void(n=!0):void 0});break;case"labels":var o=0;a.find('input[type="hidden"].ywapo_input').each(function(){return""!=t(this).val()?(o++,!0):void 0}),n=o>0;break;case"text":case"textarea":case"number":case"file":case"color":case"date":case"range":a.find("input.ywapo_input").each(function(){return""!=t(this).val()?void(n=!0):void 0});break;case"textarea":a.find("textarea.ywapo_input").each(function(){return""!=t(this).val()?void(n=!0):void 0})}return n&&a.removeClass("ywapo_miss_required"),n}function r(i,a,e){"use strcit";var n=e.data("id");if("undefined"!=typeof n){var r=o(t(a),e);i.find(".ywapo_group_container").each(function(){var i=t(this).closest(".ywapo_group_container");if("undefined"!=typeof i){var a=i.data("id");if(n!=a){var e=i.data("condition");if(""!=e){e=e.toString().split(",");var o=s(e);if(o){if(!i.hasClass("ywapo_conditional_hidden"))return i.addClass("ywapo_conditional_hidden"),c(i),!0}else{var d=t.inArray(n.toString(),e);0==d&&(r?(i.removeClass("ywapo_conditional_hidden"),p(i)):(i.addClass("ywapo_conditional_hidden"),c(i)))}}}}})}}function p(i){"use strcit";i.find("input, select, textarea").each(function(){t(this).removeAttr("disabled"),t(this).change()})}function c(i){"use strcit";i.find("input, select, textarea").each(function(){t(this).attr("disabled","disabled")})}function s(i){var a=!1;return t(".yith_wapo_groups_container").find(".ywapo_group_container").each(function(){var e=t(this).data("id");return 0==t.inArray(e.toString(),i)&&t(this).hasClass("ywapo_conditional_hidden")?void(a=!0):void 0}),a}function d(i){var a=0;return i.find('.ywapo_input:checked, select.ywapo_input option:selected, input[type="text"].ywapo_input, input[type="number"].ywapo_input, input[type="file"].ywapo_input, input[type="color"].ywapo_input, input[type="date"].ywapo_input,input[type="hidden"].ywapo_input ,textarea.ywapo_input').each(function(){var i=t(this).closest(".ywapo_group_container");if("undefined"!=typeof i&&!i.hasClass("ywapo_conditional_hidden")){var e=i.data("type"),n=!1;switch(e){case"text":case"textarea":case"number":case"file":case"color":case"date":case"labels":""!=t(this).val().trim()&&(n=!0);break;default:n=!0}if(n){var o=t(this).data("price");"undefined"!=typeof o&&o>=0&&(a+=parseFloat(o))}}}),a}function _(t){var i=accounting.formatMoney(t,{symbol:yith_wapo_general.currency_format_symbol,decimal:yith_wapo_general.currency_format_decimal_sep,thousand:yith_wapo_general.currency_format_thousand_sep,precision:yith_wapo_general.currency_format_num_decimals,format:yith_wapo_general.currency_format});return i}t(this).on("change",".yith_wapo_groups_container input, .yith_wapo_groups_container select, .yith_wapo_groups_container textarea,  input.qty",function(i){var a=t(this);t(this).trigger("yith-wapo-product-option-conditional",a),t(this).trigger("yith-wapo-product-option-update")}),t(this).on("found_variation",function(a,e){var n=(t(this),t(".yith_wapo_group_total")),o=0;if("undefined"!=typeof e.display_price)o=e.display_price;else if(t(e.price_html).find(".amount:last").size()){t(".cart");o=t(e.price_html).find(".amount:last").text(),o=_(o)}n.data("product-price",o),i(e),t(this).trigger("yith-wapo-product-option-update")}),t(this).on("yith-wapo-product-option-update",function(){var i=t(this),a=t(".yith_wapo_group_total"),e=d(i);if(e>0){if(i.find("input.qty").size())var n=parseFloat(i.find("input.qty").val());else var n=1;e*=n;var o=t(".yith-wcpb-product-bundled-items"),r=i.find(".single_variation");"undefined"!=typeof r&&0==o.length&&r.after(a);var p=_(e),c=0,a=t(".yith_wapo_group_total"),s=parseFloat(a.data("product-price")),u=a.find(".yith_wapo_group_option_total span.price"),l=a.find(".yith_wapo_group_final_total span.price");u.html(p),c=s*n+e;var h=_(c);l.html(h),a.fadeIn()}else a.fadeOut()}),t(this).on("click",".ywapo_input_container.ywapo_input_container_labels",function(i){var a=t(this).find('input[type="hidden"]');if(""!=a.val())a.val(""),t(this).removeClass("ywapo_selected");else{var e=t(".ywapo_input_container.ywapo_input_container_labels");e.removeClass("ywapo_selected"),e.find('input[type="hidden"]').val(""),t(this).addClass("ywapo_selected"),a.val(a.data("index"))}t(this).trigger("yith-wapo-product-option-conditional",a),t(this).trigger("yith-wapo-product-option-update")}),t(this).on("yith-wapo-product-option-conditional",function(i,a){var e=t(a.closest(".ywapo_group_container"));r(t(this),a,e)}),t(this).on("click",".single_add_to_cart_button",function(i){var e=t(this).closest("form.cart");return yith_wapo_general.do_submit=a(e),yith_wapo_general.do_submit}),t(document).on("yith_ywraq_action_before",function(){return u=t("form.cart"),yith_wapo_general.do_submit=a(u),yith_wapo_general.do_submit});var u=t(this);u.find(".yith_wapo_groups_container input, .yith_wapo_groups_container select, .yith_wapo_groups_container textarea").each(function(){u.trigger("yith-wapo-product-option-conditional",t(this))}),u.trigger("yith-wapo-product-option-update")},i(),void t(document).on("qv_loader_stop yit_quick_view_loaded",function(){i()}))});